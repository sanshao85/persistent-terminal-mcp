# å¿«é€Ÿå¼€å§‹ - è®© AI åˆ›å»ºæŒä¹…ç»ˆç«¯ API

## ğŸš€ 30 ç§’å¿«é€Ÿå¼€å§‹

### 1. å¤åˆ¶è¿™æ®µè¯å‘ç»™ AIï¼ˆClaudeã€GPT-4ã€Gemini ç­‰ï¼‰

```
æˆ‘éœ€è¦ä½ å¸®æˆ‘å¼€å‘ä¸€ä¸ªæŒä¹…ç»ˆç«¯ç®¡ç†ç³»ç»Ÿçš„åç«¯ APIã€‚

è¿™ä¸ªç³»ç»Ÿé€šè¿‡ REST API æä¾›ç»ˆç«¯ä¼šè¯ç®¡ç†åŠŸèƒ½ï¼Œä¸»è¦ç”¨äºè®© AI åŠ©æ‰‹èƒ½å¤Ÿæ‰§è¡Œé•¿æ—¶é—´è¿è¡Œçš„å‘½ä»¤ï¼ˆå¦‚ npm startï¼‰è€Œä¸ä¼šè¢«é˜»å¡ã€‚

æˆ‘å·²ç»å‡†å¤‡äº†è¯¦ç»†çš„éœ€æ±‚æ–‡æ¡£ï¼Œè¯·ä»”ç»†é˜…è¯»å¹¶ä¸¥æ ¼æŒ‰ç…§è¦æ±‚å®ç°ï¼š

[ç„¶åç²˜è´´ docs/meta/project-prompt.md çš„å®Œæ•´å†…å®¹]

è¯·ç¡®è®¤ä½ ç†è§£äº†æ‰€æœ‰éœ€æ±‚ï¼Œç„¶åå¼€å§‹åˆ›å»ºé¡¹ç›®ã€‚
```

### 2. ç­‰å¾… AI ç¡®è®¤ç†è§£

### 3. è®© AI å¼€å§‹ç¼–ç 

```
å¾ˆå¥½ï¼è¯·å¼€å§‹åˆ›å»ºé¡¹ç›®ã€‚è¯·æŒ‰ç…§æ–‡æ¡£ä¸­çš„é¡¹ç›®ç»“æ„åˆ›å»ºæ‰€æœ‰æ–‡ä»¶ã€‚
```

---

## ğŸ“ ä½ éœ€è¦çš„æ–‡ä»¶

### ä¸»æ–‡ä»¶ï¼ˆå¿…é¡»ï¼‰
- **docs/meta/project-prompt.md** - å®Œæ•´çš„é¡¹ç›®éœ€æ±‚ï¼ˆå‘ç»™ AIï¼‰

### è¡¥å……æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
- **docs/reference/technical-details.md** - æŠ€æœ¯å®ç°ç»†èŠ‚ï¼ˆå¦‚æœ AI éœ€è¦æ›´å¤šç»†èŠ‚ï¼‰
- **docs/zh/prompt-usage.md** - è¯¦ç»†çš„ä½¿ç”¨æŒ‡å—ï¼ˆç»™ä½ çœ‹çš„ï¼‰
- **docs/zh/quick-start.md** - æœ¬æ–‡æ¡£ï¼ˆå¿«é€Ÿå‚è€ƒï¼‰

---

## ğŸ¯ æ ¸å¿ƒéœ€æ±‚ï¼ˆAI å¿…é¡»å®ç°ï¼‰

### 7 ä¸ª API ç«¯ç‚¹

1. `POST /api/terminals` - åˆ›å»ºç»ˆç«¯
2. `POST /api/terminals/:id/input` - å‘é€å‘½ä»¤
3. `GET /api/terminals/:id/output` - è¯»å–è¾“å‡º
4. `GET /api/terminals/:id/stats` - è·å–ç»Ÿè®¡
5. `GET /api/terminals` - åˆ—å‡ºæ‰€æœ‰ç»ˆç«¯
6. `DELETE /api/terminals/:id` - ç»ˆæ­¢ç»ˆç«¯
7. `GET /api/health` - å¥åº·æ£€æŸ¥

### 2 ä¸ªå…³é”®åŠŸèƒ½

1. **è‡ªåŠ¨æ‰§è¡Œå‘½ä»¤**ï¼šç”¨æˆ·å‘é€ `"pwd"` æ—¶è‡ªåŠ¨æ·»åŠ  `\n` æ‰§è¡Œ
2. **å®Œå…¨æ¸…ç†èµ„æº**ï¼škill ç»ˆç«¯æ—¶ä»æ‰€æœ‰ Map ä¸­åˆ é™¤

---

## âœ… éªŒè¯ AI æ˜¯å¦ç†è§£

åœ¨ AI å¼€å§‹å‰ï¼Œé—®å®ƒï¼š

```
åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·å›ç­”ï¼š
1. ç”¨æˆ·å‘é€ "pwd" æ—¶ï¼Œç³»ç»Ÿåº”è¯¥å¦‚ä½•å¤„ç†ï¼Ÿ
2. kill ç»ˆç«¯åéœ€è¦æ¸…ç†å“ªäº›èµ„æºï¼Ÿ
```

**æ­£ç¡®ç­”æ¡ˆï¼š**
1. è‡ªåŠ¨æ·»åŠ  `\n` å˜æˆ `"pwd\n"` å¹¶æ‰§è¡Œ
2. ä» ptyProcessesã€outputBuffersã€sessions ä¸‰ä¸ª Map ä¸­åˆ é™¤

---

## ğŸ§ª æµ‹è¯•é¡¹ç›®

AI å®Œæˆåï¼Œè¿è¡Œè¿™äº›å‘½ä»¤æµ‹è¯•ï¼š

```bash
# 1. å®‰è£…ä¾èµ–
npm install

# 2. å¯åŠ¨æœåŠ¡å™¨
npm run dev

# 3. åˆ›å»ºç»ˆç«¯
curl -X POST http://localhost:3001/api/terminals \
  -H "Content-Type: application/json" \
  -d '{"cwd": "/tmp"}'

# è¿”å›: {"success": true, "data": {"terminalId": "xxx", ...}}

# 4. å‘é€å‘½ä»¤ï¼ˆæ³¨æ„ï¼šä¸éœ€è¦ \nï¼‰
curl -X POST http://localhost:3001/api/terminals/xxx/input \
  -H "Content-Type: application/json" \
  -d '{"input": "pwd"}'

# 5. ç­‰å¾… 1 ç§’

# 6. è¯»å–è¾“å‡º
curl http://localhost:3001/api/terminals/xxx/output

# åº”è¯¥çœ‹åˆ°: {"success": true, "data": {"output": "/tmp\n", ...}}
```

---

## ğŸ“‹ æ£€æŸ¥æ¸…å•

- [ ] å‘é€ `"pwd"` ä¼šè‡ªåŠ¨æ‰§è¡Œï¼ˆä¸éœ€è¦ `\n`ï¼‰
- [ ] kill åç»ˆç«¯ä»åˆ—è¡¨ä¸­æ¶ˆå¤±
- [ ] æ”¯æŒå¢é‡è¯»å–ï¼ˆsince å‚æ•°ï¼‰
- [ ] æ”¯æŒæ™ºèƒ½æˆªæ–­ï¼ˆhead-tail æ¨¡å¼ï¼‰
- [ ] æœ‰å®Œæ•´çš„ README.md
- [ ] æœ‰ API æ–‡æ¡£
- [ ] ä»£ç ä½¿ç”¨ TypeScript

---

## ğŸ› å¸¸è§é—®é¢˜å¿«é€Ÿä¿®å¤

### é—®é¢˜ 1: å‘½ä»¤ä¸æ‰§è¡Œ

**å‘Šè¯‰ AIï¼š**
```
å‘½ä»¤ä¸ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚è¯·åœ¨ writeToTerminal æ–¹æ³•ä¸­æ·»åŠ ï¼š

const inputToWrite = input.endsWith('\n') || input.endsWith('\r') 
  ? input 
  : input + '\n';
ptyProcess.write(inputToWrite);
```

### é—®é¢˜ 2: kill åç»ˆç«¯ä»åœ¨åˆ—è¡¨

**å‘Šè¯‰ AIï¼š**
```
kill åç»ˆç«¯ä»åœ¨åˆ—è¡¨ä¸­ã€‚è¯·åœ¨ killTerminal æ–¹æ³•ä¸­æ·»åŠ ï¼š

this.ptyProcesses.delete(terminalId);
this.outputBuffers.delete(terminalId);
this.sessions.delete(terminalId);
```

---

## ğŸ’¡ æ¨èçš„ AI

- âœ… **Claude (Anthropic)** - æœ€æ¨èï¼Œç†è§£èƒ½åŠ›å¼º
- âœ… **GPT-4 (OpenAI)** - å¾ˆå¥½ï¼Œéœ€è¦æ˜ç¡®æŒ‡ä»¤
- âœ… **Gemini (Google)** - æ”¯æŒè¶…é•¿ä¸Šä¸‹æ–‡
- âš ï¸ **GPT-3.5** - å¯ä»¥ï¼Œä½†éœ€è¦åˆ†æ­¥æŒ‡å¯¼
- âš ï¸ **Codex CLI** - å¯ä»¥ï¼Œä½†å¯èƒ½éœ€è¦å¤šæ¬¡è¿­ä»£

---

## ğŸ“ éœ€è¦æ›´å¤šå¸®åŠ©ï¼Ÿ

æŸ¥çœ‹è¿™äº›æ–‡æ¡£ï¼š
- **å¦‚ä½•ä½¿ç”¨æç¤ºè¯.md** - è¯¦ç»†çš„ä½¿ç”¨æŒ‡å—
- **docs/reference/technical-details.md** - æŠ€æœ¯å®ç°ç»†èŠ‚

---

**å°±è¿™ä¹ˆç®€å•ï¼å¤åˆ¶æç¤ºè¯ï¼Œå‘ç»™ AIï¼Œç­‰å¾…é¡¹ç›®å®Œæˆã€‚** ğŸ‰
